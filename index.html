<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EduChain - Blockchain Certificate Verification Simulation</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
</head>
<body>
    <!-- Simulation Badge -->
    <div class="simulation-badge">
        üé¨ SIMULATION MODE
    </div>

    <div class="container mt-5">
        <h1 class="text-center mb-4">üéì EduChain: Blockchain Certificate Verification</h1>
        <p class="text-center text-muted">Delhi University - Blockchain-Powered Credential System (Simulation)</p>

        <!-- Navigation Tabs -->
        <ul class="nav nav-tabs" role="tablist">
            <li class="nav-item">
                <a class="nav-link active" data-bs-toggle="tab" href="#verify">Verify Certificate</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-bs-toggle="tab" href="#issue">Issue Certificate (Admin)</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-bs-toggle="tab" href="#student">Student Portal</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-bs-toggle="tab" href="#analytics">System Analytics</a>
            </li>
        </ul>

        <!-- Tab Content -->
        <div class="tab-content">
            <!-- VERIFICATION TAB -->
            <div id="verify" class="tab-pane fade show active">
                <h3>üîç Verify Certificate Authenticity</h3>
                <p>Enter the certificate hash or scan QR code to verify on blockchain</p>

                <div class="row">
                    <div class="col-md-8">
                        <div class="input-group mb-3">
                            <input type="text" id="verifyHash" class="form-control" 
                                   placeholder="Enter certificate hash (0x...)">
                            <button class="btn btn-primary" onclick="verifyCertificate()">
                                Verify on Blockchain
                            </button>
                        </div>

                        <!-- Quick Test Buttons -->
                        <div class="mb-3">
                            <p class="text-muted">Quick Test:</p>
                            <button class="btn btn-sm btn-outline-success" 
                                    onclick="testValidCert()">Test Valid Certificate</button>
                            <button class="btn btn-sm btn-outline-danger" 
                                    onclick="testInvalidCert()">Test Invalid Certificate</button>
                            <button class="btn btn-sm btn-outline-warning" 
                                    onclick="testRevokedCert()">Test Revoked Certificate</button>
                        </div>

                        <div class="loading-spinner" id="verifySpinner">
                            <div class="spinner-border text-primary" role="status">
                                <span class="visually-hidden">Querying blockchain...</span>
                            </div>
                            <p class="mt-2">Querying Ethereum blockchain...</p>
                        </div>

                        <div id="verifyResult"></div>
                    </div>

                    <div class="col-md-4">
                        <div class="card">
                            <div class="card-body">
                                <h5>üì± QR Code Scanner</h5>
                                <p class="text-muted">Scan certificate QR code</p>
                                <div class="text-center">
                                    <svg width="150" height="150" viewBox="0 0 100 100">
                                        <rect fill="#f0f0f0" width="100" height="100"/>
                                        <text x="50" y="50" text-anchor="middle" fill="#999" font-size="12">
                                            QR Scanner
                                        </text>
                                    </svg>
                                </div>
                                <button class="btn btn-sm btn-secondary w-100 mt-2" disabled>
                                    Scanner (Demo Only)
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ISSUE CERTIFICATE TAB -->
            <div id="issue" class="tab-pane fade">
                <h3>üèõÔ∏è Issue Certificate (University Admin)</h3>
                <p>Admin-only: Issue new blockchain certificate</p>

                <div class="alert alert-info">
                    <strong>Connected Wallet:</strong> 0x742d...bEb9 (Delhi University Admin)
                </div>

                <form id="issueForm">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label class="form-label">Student Name *</label>
                                <input type="text" class="form-control" id="studentName" 
                                       placeholder="e.g., Priya Sharma" required>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label class="form-label">Student ID *</label>
                                <input type="text" class="form-control" id="studentId" 
                                       placeholder="e.g., 2021CS001" required>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-8">
                            <div class="mb-3">
                                <label class="form-label">Degree Program *</label>
                                <select class="form-control" id="degree" required>
                                    <option value="">Select Degree</option>
                                    <option>B.Tech Computer Science</option>
                                    <option>B.Tech Information Technology</option>
                                    <option>B.Tech Electronics</option>
                                    <option>B.Sc Physics</option>
                                    <option>B.A Economics</option>
                                    <option>M.Tech AI/ML</option>
                                    <option>MBA</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="mb-3">
                                <label class="form-label">Grade *</label>
                                <input type="text" class="form-control" id="grade" 
                                       placeholder="e.g., 9.2 CGPA" required>
                            </div>
                        </div>
                    </div>

                    <button type="submit" class="btn btn-success btn-lg">
                        üìù Issue Certificate on Blockchain
                    </button>
                </form>

                <div class="loading-spinner" id="issueSpinner">
                    <div class="spinner-border text-success" role="status"></div>
                    <p class="mt-2">Creating blockchain transaction...</p>
                    <small class="text-muted">Waiting for network confirmation...</small>
                </div>

                <div id="issueResult"></div>
            </div>

            <!-- STUDENT PORTAL TAB -->
            <div id="student" class="tab-pane fade">
                <h3>üë§ Student Portal</h3>
                <p>View and share your blockchain certificates</p>

                <div class="input-group mb-3">
                    <input type="text" id="studentIdLookup" class="form-control" 
                           placeholder="Enter your Student ID (e.g., 2021CS001)">
                    <button class="btn btn-primary" onclick="loadStudentCertificates()">
                        View My Certificates
                    </button>
                </div>

                <div id="studentCertificates"></div>
            </div>

            <!-- ANALYTICS TAB -->
            <div id="analytics" class="tab-pane fade">
                <h3>üìä System Analytics</h3>
                
                <div class="row">
                    <div class="col-md-3">
                        <div class="metric-card">
                            <div class="metric-value" id="totalCerts">0</div>
                            <div class="text-muted">Certificates Issued</div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="metric-card">
                            <div class="metric-value" id="verifications">247</div>
                            <div class="text-muted">Verifications Today</div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="metric-card">
                            <div class="metric-value text-success">100%</div>
                            <div class="text-muted">Fraud Prevention</div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="metric-card">
                            <div class="metric-value">< 30s</div>
                            <div class="text-muted">Avg Verify Time</div>
                        </div>
                    </div>
                </div>

                <div class="mt-4">
                    <h5>Blockchain Network Status</h5>
                    <table class="table">
                        <tr>
                            <td>Network</td>
                            <td><span class="badge bg-primary">Sepolia Testnet</span></td>
                        </tr>
                        <tr>
                            <td>Contract Address</td>
                            <td class="blockchain-tx">0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb9</td>
                        </tr>
                        <tr>
                            <td>Latest Block</td>
                            <td>#12,456,792</td>
                        </tr>
                        <tr>
                            <td>Gas Price</td>
                            <td>15 Gwei</td>
                        </tr>
                    </table>
                </div>
            </div>

        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="mockData.js"></script>
    <script src="script.js"></script>
</body>
</html>
